{% extends "base.html" %}

{% block content %}
<div class="upload-section">
    <h2>Upload Your Voice Note</h2>
    <p>Transform your audio recordings into structured meeting notes with AI</p>

    <form id="uploadForm" method="POST" action="/upload" enctype="multipart/form-data">
        <!-- Voice Recording Section -->
        <div class="recording-section recording-section-compact">
            <h3>Record Your Voice</h3>
            <p class="recording-hint">Click to start recording</p>

            <div class="recording-controls">
                <button type="button" class="btn-record btn-record-compact" id="recordBtn">
                    <span class="record-icon">&#x1F3A4;</span>
                    <span class="record-text">Record</span>
                </button>

                <button type="button" class="btn-stop btn-stop-compact" id="stopBtn" style="display: none;">
                    <span>&#x23F9;</span>
                    <span>Stop</span>
                </button>
            </div>

            <div class="recording-timer" id="recordingTimer" style="display: none;">
                <span class="recording-pulse"></span>
                <span id="timerDisplay">00:00</span>
            </div>

            <div class="audio-preview" id="audioPreview" style="display: none;">
                <p>Preview:</p>
                <audio id="audioPlayback" controls></audio>
                <button type="button" class="btn btn-secondary btn-small" id="discardBtn">
                    <span>&#x1F5D1;</span>
                    <span>Discard</span>
                </button>
            </div>
        </div>

        <!-- Divider -->
        <div class="divider">
            <span>OR</span>
        </div>

        <div class="drop-zone" id="dropZone">
            <div class="drop-zone-icon">&#x1F4C4;</div>
            <div class="drop-zone-text">Drag & drop audio file</div>
            <div class="drop-zone-hint">or click to browse</div>
            <input type="file" id="audioFile" name="audio" accept="audio/*,.opus" class="file-input" required>
        </div>

        <div id="fileSelected" class="file-selected">
            <span id="fileName"></span>
        </div>

        <button type="submit" class="btn" id="submitBtn">
            <span>&#x1F680;</span>
            <span>Process Audio</span>
        </button>
    </form>

    <div id="progressSection" class="progress-section">
        <div class="spinner"></div>
        <p class="progress-text">Processing your audio file...</p>
        <div class="progress-bar-container">
            <div class="progress-bar"></div>
        </div>
    </div>
</div>

<div class="container" style="margin-top: 40px; text-align: center;">
    <a href="/history" class="btn btn-secondary" style="text-decoration: none;">
        <span>&#x1F4C2;</span>
        <span>View History</span>
    </a>
</div>
{% endblock %}
